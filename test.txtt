
> quantbot@1.0.3 test /home/memez/quantBot
> vitest


[1m[44m DEV [49m[22m [34mv4.0.15 [39m[90m/home/memez/quantBot[39m

 [31m‚ùØ[39m packages/api-clients/tests/unit/birdeye-client.test.ts [2m([22m[2m23 tests[22m[2m | [22m[31m1 failed[39m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 22[2mms[22m[39m
       [32m‚úì[39m should load API keys from environment[32m 3[2mms[22m[39m
       [32m‚úì[39m should throw error if no API keys found[32m 1[2mms[22m[39m
       [32m‚úì[39m should create axios instance for each API key[32m 3[2mms[22m[39m
       [32m‚úì[39m should use custom API keys when provided[32m 2[2mms[22m[39m
       [32m‚úì[39m should use custom base URL when provided[32m 1[2mms[22m[39m
       [2m[90m‚Üì[39m[22m should fetch OHLCV data successfully
       [32m‚úì[39m should handle empty response[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle 400/404 errors gracefully[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle rate limit (429) and retry with next key[39m[32m 4[2mms[22m[39m
       [32m‚úì[39m should detect chain from address format (0x = ethereum)[32m 1[2mms[22m[39m
       [32m‚úì[39m should calculate credits correctly for different candle counts[32m 1[2mms[22m[39m
       [32m‚úì[39m should fetch token metadata successfully[32m 1[2mms[22m[39m
       [32m‚úì[39m should return null for 404 errors[32m 0[2mms[22m[39m
       [32m‚úì[39m should use fallback name/symbol if not provided[32m 0[2mms[22m[39m
       [32m‚úì[39m should track API key usage[32m 0[2mms[22m[39m
       [32m‚úì[39m should rotate API keys using round-robin[32m 0[2mms[22m[39m
       [32m‚úì[39m should reset usage statistics[32m 0[2mms[22m[39m
       [32m‚úì[39m should track total credits used[32m 0[2mms[22m[39m
       [32m‚úì[39m should calculate remaining credits[32m 0[2mms[22m[39m
       [32m‚úì[39m should detect when approaching credit limit[32m 0[2mms[22m[39m
       [32m‚úì[39m should get credit usage statistics[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle server errors with retry[32m 0[2mms[22m[39m
       [32m‚úì[39m should not retry on 400/401/403 errors[32m 0[2mms[22m[39m
 [31m‚ùØ[39m packages/jobs/tests/unit/ohlcv-birdeye-fetch.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 88[2mms[22m[39m
       [32m‚úì[39m should fetch candles from Birdeye API[32m 4[2mms[22m[39m
       [32m‚úì[39m should skip fetch if coverage is sufficient[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should fetch if coverage is below threshold[39m[32m 5[2mms[22m[39m
       [32m‚úì[39m should handle API errors gracefully[32m 1[2mms[22m[39m
       [32m‚úì[39m should open circuit breaker after threshold failures[32m 1[2mms[22m[39m
       [32m‚úì[39m should reset circuit breaker on success[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should handle empty candle response[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should process multiple work items[32m 11[2mms[22m[39m
       [32m‚úì[39m should apply rate limiting between requests[32m 51[2mms[22m[39m
       [32m‚úì[39m should handle mixed success and failure[32m 11[2mms[22m[39m
       [32m‚úì[39m should reset circuit breaker manually[32m 0[2mms[22m[39m
       [32m‚úì[39m should report circuit breaker state correctly[32m 0[2mms[22m[39m
 [31m‚ùØ[39m packages/ohlcv/tests/ohlcv-ingestion-engine.integration.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 17[2mms[22m[39m
[31m       [31m√ó[31m should fetch metadata, store it, then fetch and store candles[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should retrieve stored candles from ClickHouse on subsequent calls[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should handle incremental storage across multiple chunks[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should preserve full mint address in all storage operations[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle storage failures gracefully and still return data[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should query ClickHouse with correct time ranges[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should maintain data consistency across multiple fetches[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle partial data retrieval correctly[39m[32m 3[2mms[22m[39m
 [31m‚ùØ[39m packages/ohlcv/tests/ohlcv-ingestion-engine.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m11 failed[39m[2m)[22m[32m 84[2mms[22m[39m
       [32m‚úì[39m should initialize ClickHouse[32m 2[2mms[22m[39m
       [32m‚úì[39m should only initialize once[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle initialization errors[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should fetch and store metadata before candles[39m[32m 9[2mms[22m[39m
[31m       [31m√ó[31m should continue even if metadata fetch fails[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should fetch 1m candles from -52 minutes before alert[39m[32m 5[2mms[22m[39m
       [32m‚úì[39m should use cache for 1m candles if available[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should store 1m candles immediately after fetching[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should fetch 5m candles from -260 minutes before alert[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should chunk 5m candles when fetching large time ranges[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should store each 5m chunk immediately[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should use in-memory cache on subsequent calls[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should bypass cache when forceRefresh is true[39m[32m 5[2mms[22m[39m
       [32m‚úì[39m should use ClickHouse cache before API[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should preserve full mint address in all operations[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should handle API fetch errors gracefully[39m[32m 26[2mms[22m[39m
[31m       [31m√ó[31m should handle storage errors but still return data[39m[32m 3[2mms[22m[39m
       [32m‚úì[39m should clear in-memory cache[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should track cache statistics[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should return comprehensive metadata[32m 2[2mms[22m[39m
 [31m‚ùØ[39m packages/jobs/tests/golden/ohlcv-birdeye-fetch.golden.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 181[2mms[22m[39m
       [32m‚úì[39m should complete full golden path: work item ‚Üí coverage check ‚Üí API fetch ‚Üí return candles[32m 4[2mms[22m[39m
       [32m‚úì[39m should handle large candle responses (5000+ candles - API limit)[32m 2[2mms[22m[39m
       [32m‚úì[39m should preserve mint address case exactly (critical for Solana)[32m 0[2mms[22m[39m
       [32m‚úì[39m should process worklist with rate limiting and return all results[32m 102[2mms[22m[39m
       [32m‚úì[39m should handle mixed success/failure in worklist gracefully[32m 23[2mms[22m[39m
       [32m‚úì[39m should skip fetch when coverage is sufficient[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should fetch when coverage is below threshold[39m[32m 11[2mms[22m[39m
       [32m‚úì[39m should open circuit breaker after threshold failures and block requests[32m 1[2mms[22m[39m
       [32m‚úì[39m should reset circuit breaker on successful fetch[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle empty candle response gracefully[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle very large time windows (stress test)[32m 25[2mms[22m[39m
       [32m‚úì[39m should handle all supported intervals correctly[32m 2[2mms[22m[39m
       [32m‚úì[39m should handle all supported chains correctly[32m 6[2mms[22m[39m
 [32m‚úì[39m packages/api-clients/tests/unit/helius-client.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [31m‚ùØ[39m packages/ohlcv/tests/unit/dependency-boundaries.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 7[2mms[22m[39m
     [32m‚úì[39m should not depend on @quantbot/api-clients[32m 2[2mms[22m[39m
     [32m‚úì[39m should not depend on axios[32m 0[2mms[22m[39m
     [32m‚úì[39m should not depend on dotenv[32m 0[2mms[22m[39m
[31m     [31m√ó[31m should not import network modules in source files[39m[32m 3[2mms[22m[39m
 [31m‚ùØ[39m packages/workflows/tests/golden/runSimulationDuckdb.golden.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 22[2mms[22m[39m
[31m       [31m√ó[31m should complete full golden path: query ‚Üí check OHLCV ‚Üí simulate ‚Üí return results[39m[32m 11[2mms[22m[39m
[31m       [31m√ó[31m should handle skipped tokens and trigger OHLCV ingestion[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should complete golden path for single call mode[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should collect per-call errors and continue processing[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should skip calls without OHLCV in resume mode[32m 2[2mms[22m[39m
       [32m‚úì[39m should return JSON-serializable result (no Date objects, no class instances)[32m 1[2mms[22m[39m
 [31m‚ùØ[39m packages/cli/tests/integration/command-execution.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 27[2mms[22m[39m
       [32m‚úì[39m should execute a complete command flow[32m 6[2mms[22m[39m
       [32m‚úì[39m should handle validation errors in command flow[32m 3[2mms[22m[39m
       [32m‚úì[39m should format output in different formats[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle and format errors in command execution[32m 4[2mms[22m[39m
       [32m‚úì[39m should sanitize sensitive information in errors[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle Solana-specific errors[32m 1[2mms[22m[39m
       [32m‚úì[39m should register and retrieve multiple packages[32m 1[2mms[22m[39m
       [32m‚úì[39m should generate help text for packages[32m 1[2mms[22m[39m
       [32m‚úì[39m should parse and validate complex schemas[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should provide helpful error messages for invalid arguments[39m[32m 4[2mms[22m[39m
 [31m‚ùØ[39m packages/workflows/tests/unit/runSimulation.golden.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 43[2mms[22m[39m
     [32m‚úì[39m GOLDEN: dryRun true => simulates but does not persist[32m 21[2mms[22m[39m
     [32m‚úì[39m GOLDEN: dryRun false => persists run + results[32m 4[2mms[22m[39m
[31m     [31m√ó[31m GOLDEN: missing strategy => fails fast[39m[32m 8[2mms[22m[39m
[31m     [31m√ó[31m GOLDEN: invalid date range (to <= from) => rejects[39m[32m 2[2mms[22m[39m
     [32m‚úì[39m GOLDEN: no calls => returns empty result, no persist, no sim[32m 1[2mms[22m[39m
     [32m‚úì[39m GOLDEN: per-call error => captured; workflow continues[32m 1[2mms[22m[39m
     [32m‚úì[39m GOLDEN: dedupes duplicate call ids[32m 1[2mms[22m[39m
     [32m‚úì[39m GOLDEN: stable ordering by createdAt ascending[32m 1[2mms[22m[39m
     [32m‚úì[39m GOLDEN: NO_CANDLES must be flagged and must not call simulation.run[32m 1[2mms[22m[39m
     [32m‚úì[39m GOLDEN: windowing must be applied to ohlcv.getCandles (pre/post minutes)[32m 1[2mms[22m[39m
 [31m‚ùØ[39m packages/storage/tests/unit/influxdb-client.test.ts [2m([22m[2m23 tests[22m[2m | [22m[31m18 failed[39m[2m)[22m[32m 46[2mms[22m[39m
[31m       [31m√ó[31m should initialize with environment variables[39m[32m 5[2mms[22m[39m
       [32m‚úì[39m should use default values when env vars not set[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should create bucket if it does not exist[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should skip bucket creation if it exists[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle initialization errors[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should write OHLCV data points[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should handle write errors[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should query OHLCV data[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should validate token address format[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should validate date range[39m[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should escape token address in query[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should get latest price for a token[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should return 0 if no price found[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should validate token address[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return true if data exists[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should return false if no data exists[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should validate inputs[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should get list of available tokens[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m should return empty array on error[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should get record count for a token[39m[32m 0[2mms[22m[39m
       [32m‚úì[39m should return 0 if no records found[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should validate token address[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should close write API connection[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m packages/analytics/tests/unit/period-metrics.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 39[2mms[22m[39m
[31m       [31m√ó[31m should enrich a call with period metrics[39m[32m 23[2mms[22m[39m
       [32m‚úì[39m should use default period of 7 days[32m 3[2mms[22m[39m
       [32m‚úì[39m should use custom period days[32m 1[2mms[22m[39m
       [32m‚úì[39m should try 5m candles first, then 1m[32m 1[2mms[22m[39m
       [32m‚úì[39m should return original call if no candles found[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle errors gracefully[32m 1[2mms[22m[39m
       [32m‚úì[39m should enrich multiple calls[32m 1[2mms[22m[39m
       [32m‚úì[39m should process calls in batches[32m 3[2mms[22m[39m
       [32m‚úì[39m should handle empty calls array[32m 1[2mms[22m[39m
       [32m‚úì[39m should analyze re-entry opportunities from enriched calls[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle calls without re-entry opportunities[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle empty calls array[32m 0[2mms[22m[39m
 [31m‚ùØ[39m packages/ingestion/tests/unit/dependency-boundaries.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 9[2mms[22m[39m
     [32m‚úì[39m should not depend on @quantbot/api-clients[32m 2[2mms[22m[39m
     [32m‚úì[39m should not depend on axios[32m 0[2mms[22m[39m
     [32m‚úì[39m should not depend on dotenv[32m 0[2mms[22m[39m
[31m     [31m√ó[31m should not import network modules in source files[39m[32m 4[2mms[22m[39m
 [31m‚ùØ[39m packages/analytics/tests/unit/CallDataLoader.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 94[2mms[22m[39m
[31m       [31m√ó[31m should load calls without filters[39m[32m 46[2mms[22m[39m
[31m       [31m√ó[31m should apply date range filters[39m[32m 15[2mms[22m[39m
[31m       [31m√ó[31m should apply caller name filters[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should apply chain filters[39m[32m 4[2mms[22m[39m
[31m       [31m√ó[31m should apply limit[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should use default limit when not specified[39m[32m 3[2mms[22m[39m
[31m       [31m√ó[31m should handle calls without caller information[39m[32m 5[2mms[22m[39m
[31m       [31m√ó[31m should handle database errors[39m[32m 5[2mms[22m[39m
       [32m‚úì[39m should skip enrichment if calls already have ATH data[32m 2[2mms[22m[39m
       [32m‚úì[39m should enrich calls without ATH data[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle empty calls array[32m 0[2mms[22m[39m
       [32m‚úì[39m should process calls in batches[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle enrichment errors gracefully[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should try 5m candles first, then 1m[39m[32m 3[2mms[22m[39m
 [31m‚ùØ[39m packages/analytics/tests/unit/AnalyticsEngine.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 19[2mms[22m[39m
[31m       [31m√ó[31m should initialize successfully[39m[32m 10[2mms[22m[39m
[31m       [31m√ó[31m should not initialize twice[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should analyze calls successfully[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should filter by caller names[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should filter by date range[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should enrich with ATH when requested[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should not enrich with ATH when not requested[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should get metrics for a specific caller[39m[32m 1[2mms[22m[39m
[31m       [31m√ó[31m should return null for non-existent caller[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m packages/analytics/tests/unit/MetricsAggregator.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 19[2mms[22m[39m
       [32m‚úì[39m should aggregate metrics for a single caller[32m 5[2mms[22m[39m
       [32m‚úì[39m should aggregate metrics for multiple callers[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle winning and losing calls correctly[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle empty calls array[32m 0[2mms[22m[39m
       [32m‚úì[39m should calculate correct averages[32m 0[2mms[22m[39m
       [32m‚úì[39m should handle calls with zero timeToAth[32m 0[2mms[22m[39m
       [32m‚úì[39m should calculate distribution for calls in different buckets[32m 1[2mms[22m[39m
       [32m‚úì[39m should handle empty calls array[32m 0[2mms[22m[39m
       [32m‚úì[39m should calculate average time to ATH per bucket[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should calculate system metrics from database[39m[32m 7[2mms[22m[39m
[31m       [31m√ó[31m should handle database errors gracefully[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m should handle empty calls array for date range[32m 0[2mms[22m[39m
[31mCancelling test run. Press CTRL+c again to exit forcefully.
[39m
 [31m‚ùØ[39m packages/utils/tests/integration/python-bridge.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1812[2mms[22m[39m
     [33m[2m‚úì[22m[39m runs Python tool on tiny fixture and validates output schema [33m 1196[2mms[22m[39m
[31m     [31m√ó[31m validates Python tool handles invalid input gracefully[39m[33m 614[2mms[22m[39m
