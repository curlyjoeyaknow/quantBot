<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Lab UI — Leaderboard</title>
  <link rel="stylesheet" href="/public/style.css" />
</head>
<body>
  <nav>
    <a href="/strategies">Strategies</a>
    <a href="/runs">Runs</a>
    <a href="/leaderboard" class="active">Leaderboard</a>
  </nav>

  <main>
    <h1>Caller Leaderboard</h1>

    <section class="card">
      <div class="row">
        <label>Run ID&nbsp;<input id="runId" placeholder="paste run_id" /></label>
        <button id="load">Load</button>
        <span id="msg"></span>
      </div>
    </section>

    <section class="card">
      <h2>PnL + Risk (Aggregated)</h2>
      <div class="table-scroll">
        <table id="tbl">
          <thead>
            <tr>
              <th>Caller</th>
              <th>Trades</th>
              <th>Agg PnL %</th>
              <th>Strike</th>
              <th>Median DD (bps)</th>
              <th>Total DD (bps)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <h2>Path Metrics (Alert → Multiples)</h2>
      <div class="table-scroll">
        <table id="tblPath">
          <thead>
            <tr>
              <th>Caller</th>
              <th>Calls</th>
              <th>#2x</th>
              <th>#3x</th>
              <th>#4x</th>
              <th>Fail 2x</th>
              <th>Med t2x (min)</th>
              <th>Med t3x (min)</th>
              <th>Med t4x (min)</th>
              <th>Avg DD (bps)</th>
              <th>Avg DD→2x (bps)</th>
              <th>Med alert→activity (s)</th>
              <th>Avg peak (x)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <p class="hint">These are anchored to the alert timestamp (not entry), so they reflect caller quality.</p>
    </section>
  </main>

  <script src="/public/leaderboard.js"></script>
</body>
</html>
