---
description: Changelog enforcement rules for all packages. Any change affecting functionality, security, or behavior MUST be documented in CHANGELOG.md.
globs: ["CHANGELOG.md", "**/CHANGELOG.md"]
alwaysApply: true
---

# Changelog Enforcement Rules

This repository enforces strict changelog policies for all packages. **Any change affecting functionality, security, or behavior _must_ be documented in `CHANGELOG.md`.**

---

## Enforcement

- **Pre-commit:** Block commit if a required changelog entry is missing (when pre-commit hook is enabled).
- **Code-review:** Reject PR if the changelog is not up to date for relevant changes.
- **AI assistant:** Always prompt developers to update the changelog for impactful code changes.

---

## Changelog Update Checklist

- [ ] `CHANGELOG.md` is updated for every functional, security, or behavioral change.
- [ ] Entries are properly grouped using one of the following sections:
  - Security
  - Fixed
  - Added
  - Changed
  - Deprecated
  - Removed
- [ ] Security and bug fixes include severity indicators (**CRITICAL**, **HIGH**, **MEDIUM**).
- [ ] Reference file/package for context, if beneficial.

---

## When Must You Update the Changelog?

Update the changelog **for any of the following:**

- Security fixes
- Bug fixes
- New features
- Breaking changes
- Performance improvements
- Memory leak fixes
- Type safety improvements
- API or dependency changes that affect runtime or the public API/behavior

---

## Changelog Format

- Follow [Keep a Changelog](https://keepachangelog.com/en/1.0.0/) style.
- Use the following sections (in order):
  1. Security
  2. Fixed
  3. Added
  4. Changed
  5. Deprecated
  6. Removed
- Prefix security and bug fix entries with severity:
  - `CRITICAL`
  - `HIGH`
  - `MEDIUM`
- Example severity usage: `**CRITICAL**: ...`
- Reference location/file where helpful, e.g. `(packages/utils/src/events/EventBus.ts)`
- Use version date format: `YYYY-MM-DD` (e.g., `## [1.0.4] - 2025-01-13`)

---

### Commit Checklist

- [ ] All required changes are documented in `CHANGELOG.md`.
- [ ] Categories/sections match the [Keep a Changelog](https://keepachangelog.com) format.
- [ ] Severity and/or file/package are noted when relevant.

---

## Special Cases

### Multiple Changes

- Group related entries under appropriate sections.
- Use individual bullets under each section.
- Place the newest entries first under the `[Unreleased]` section.

### Breaking Changes

- Clearly mark as breaking in the changelog.
- Provide migration notes or details if necessary.
- At release, move breaking changes to the versioned section.

---

## Release Process

1. Move the `[Unreleased]` section to a new, versioned section with the release date.
2. Add the date in `YYYY-MM-DD` format.
3. Start a new `[Unreleased]` section at the top of the file.
4. Tag the commit with the new version and date.
