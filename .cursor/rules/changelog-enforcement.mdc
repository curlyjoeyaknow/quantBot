---
description: Changelog enforcement rules for all packages. Any change affecting functionality, security, or behavior MUST be documented in CHANGELOG.md.
globs: ["CHANGELOG.md", "**/CHANGELOG.md"]
alwaysApply: true
---

# Changelog Enforcement Rules

changelog-enforcement:
  enforcement:
    - pre-commit: Block commit if required changelog entry missing (if pre-commit hook enabled)
    - code-review: Reject PR if changelog is not up to date for relevant changes
    - ai-assistant: Always prompt developer to update changelog for impactful code changes
  checklist:
    - CHANGELOG.md updated for each functional, security, or behavioral change
    - Changes properly grouped: Security, Fixed, Added, Changed, Deprecated, Removed
    - Security/bug fixes include severity (**CRITICAL**, **HIGH**, **MEDIUM**)
    - Reference file/package for context if beneficial
  must_update_changelog_for:
    - Security fixes
    - Bug fixes
    - New features
    - Breaking changes
    - Performance improvements
    - Memory leak fixes
    - Type safety improvements
    - API or dependency changes that affect runtime or public API/behavior
  changelog_format:
    base: "Keep a Changelog"
    sections:
      - Security
      - Fixed
      - Added
      - Changed
      - Deprecated
      - Removed
    severity_indicators:
      - CRITICAL
      - HIGH
      - MEDIUM
    severity_usage: 'Security/bug fixes prefixed, e.g. "**CRITICAL**: ...".'
    location_example: "(packages/utils/src/events/EventBus.ts)"
    date_format: "YYYY-MM-DD (e.g. ## [1.0.4] - 2025-01-13)"
  checklist_before_commit:
    - All required changes documented in CHANGELOG.md
    - Categories/sections match "Keep a Changelog" style
    - Severity and/or file/package noted when relevant
  special_cases:
    multiple_changes:
      - Group related entries
      - Use individual bullets under each section
      - Place newest entries first under [Unreleased]
    breaking_changes:
      - Clearly mark as breaking
      - Provide migration detail where necessary
      - At release, move to versioned section
  release_process:
    - Move [Unreleased] to a new version/datestamped section
    - Add date in YYYY-MM-DD format
    - Start new [Unreleased] at top of file
    - Tag commit with version

## When Must You Update the Changelog?

- Every code change that impacts functionality, security, or behavior must be recorded in CHANGELOG.md
- Use guide: [Keep a Changelog](https://keepachangelog.com)
- Security fixes (### Security)
- Bug fixes (### Fixed)
- New features (### Added)
- Breaking changes (### Changed or ### Removed)
- Performance or memory updates
- Type safety improvements
- Public API (or breaking dependency) changes

## Changelog Format

- Sections: Security, Fixed, Added, Changed, Deprecated, Removed
- Security/bug fix severity (CRITICAL, HIGH, MEDIUM) prefixed in entry
- Include file/package reference where it aids review
- Version date must use YYYY-MM-DD format

## Special Case Handling

- Multiple changes: group under their sections, newest changes first, bullets per change
- Breaking changes: mark clearly, add migration notes if needed

## Release Process

1. Move [Unreleased] section to new version section, dated
2. Start fresh [Unreleased] at top
3. Tag commit with new version and date
