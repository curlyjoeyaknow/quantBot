---
description: Scripts and utilities rules for scripts/ directory
globs: ["scripts/**/*.ts", "scripts/**/*.js"]
alwaysApply: true
---

# Scripts Rules (scripts/)

script-organization:

directory-structure:
    - "Analysis scripts (`scripts/analysis/`): Data analysis and reporting scripts."
    - "Data processing scripts (`scripts/data-processing/`): Data transformation and cleaning scripts."
    - "Test scripts (`scripts/test/`): Testing and validation scripts."
    - "Migration scripts (`scripts/migration/`): Utilities for data migration tasks."
    - "Legacy scripts (`scripts/legacy/`): Deprecated scripts, preserved for reference."

script-standards:

type-script-scripts:
    - "Use TypeScript for new scripts"
    - "Enable strict mode in `tsconfig.scripts.json`"
    - "Use proper type definitions"
    - "Export main function for testability"
    - "Use async/await for async operations"

error-handling:
    - "Always handle errors with try/catch"
    - "Log errors with context"
    - "Exit with proper exit codes (0 for success, non-zero for errors)"
    - "Provide helpful error messages"

cli-scripts:
    - "Use proper argument parsing (consider using `commander` or `yargs`)"
    - "Validate all inputs"
    - "Provide help text with `--help` flag"
    - "Use proper exit codes"
    - "Log progress for long-running operations"

data-processing-scripts:
    - "Validate input data before processing"
    - "Use streaming for large files"
    - "Implement proper error recovery"
    - "Log processing progress"
    - "Save intermediate results for debugging"

analysis-scripts:
    - "Use proper statistical methods"
    - "Document assumptions and methodology"
    - "Generate readable reports"
    - "Export results in multiple formats (CSV, JSON)"
    - "Include metadata in output files"

migration-scripts:
    - "Implement idempotent operations"
    - "Use transactions for database operations"
    - "Create backups before destructive operations"
    - "Log all changes"
    - "Provide rollback mechanisms when possible"

testing-scripts:
    - "Test scripts should be deterministic"
    - "Use mock data for testing"
    - "Clean up test artifacts"
    - "Document test scenarios"

performance-scripts:
    - "Use streaming for large data processing"
    - "Implement proper batching for API calls"
    - "Cache expensive computations"
    - "Use parallel processing where appropriate"
    - "Monitor memory usage for large operations"

documentation-scripts:  
    - "Include JSDoc comments for all functions"
    - "Document command-line arguments"
    - "Provide usage examples"
    - "Document expected input/output formats"
    - "Include error handling documentation"

