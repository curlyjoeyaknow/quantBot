---
description: Strategy optimization rules for src/simulation/optimization/
globs: ["src/simulation/optimization/**/*.ts", "scripts/optimization/**/*.ts"]
alwaysApply: true
---

# Essential Optimization Rules  

optimization-engine:
  core-principles:
    - "All optimization must use `StrategyOptimizer` class"
    - "Optimizations must be reproducible and deterministic"
    - "Use proper parameter grid generation"
    - "Validate all optimization parameters"
    - "Log optimization progress for long-running operations"
  parameter-grid:
    - "Use `ParameterGrid` class for grid generation"
    - "Define parameter ranges clearly"
    - "Use appropriate step sizes for continuous parameters"
    - "Document parameter constraints"
    - "Validate grid bounds before optimization"
optimization-types:
  grid-search:
    - "Use grid search for exhaustive parameter exploration"
    - "ML-based optimization for complex parameter spaces"
    - "Use appropriate optimization algorithms for the problem"
    - "Document optimization methodology"
    - "Compare optimization results across different methods"

optimization-results:
  result-structure:
    - "Structure results consistently"
    - "Include optimization metadata"
    - "Store parameter combinations with results"
    - "Include performance metrics"
    - "Export results in multiple formats"

performance:

  efficiency:
    - "Use parallel processing for independent optimizations"
    - "Cache expensive computations"
    - "Implement proper batching"
    - "Monitor memory usage during optimization"
    - "Use appropriate timeout values"

scalability:
  scalability:
    - "Design optimizations to scale with parameter space"
    - "Use streaming for large result sets"
    - "Implement proper pagination"
    - "Clean up resources after optimization"
    - "Handle large datasets efficiently"

results:

  result-structure:
    - "Structure results consistently"
    - "Include optimization metadata"
    - "Store parameter combinations with results"
    - "Include performance metrics"
    - "Export results in multiple formats"

testing:

unit-tests:
    - "Test parameter grid generation"
    - "Test optimization algorithms"
    - "Test result structures"
    - "Test error handling"
    - "Test edge cases"

integration-tests:
    - "Test full optimization runs"
    - "Test with real data"
    - "Test performance characteristics"
    - "Verify result formats"
    - "Test resource cleanup"

documentation:

code-documentation:
    - "Document optimization algorithms"
    - "Explain parameter constraints"
    - "Provide usage examples"
    - "Document performance characteristics"
    - "Include optimization notes"

result-documentation:
    - "Document optimization methodology"
    - "Explain parameter choices"
    - "Include performance metrics"
    - "Document findings"
    - "Provide recommendations"

